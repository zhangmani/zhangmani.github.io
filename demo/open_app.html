<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=2.0,maximum-scale=1,user-scalable=no">
    <title>open app in web</title>
</head>
<body>
<a id="open" href="rhcthothuati://app">open app</a>

<div class="openApp"></div>
<iframe id="iframe" src="" frameborder="0"></iframe>
<script src="/js/jquery-2.1.4.min.js"></script>
<script>
    var url = "rhcthothuati://app";
    $(document).ready(
            function () {
                $("#open").click(function () {
                    var this_url=location.href+"";
                    location.href = 'http://a.app.qq.com/o/simple.jsp?pkgname=com.rhct.android.rhctapp';
                    var a = document.createElement("iframe");
                    a.src = url;
                    a.style.display = "none";
                    document.body.appendChild(a);
                    window.setTimeout(function () {
                        document.body.removeChild(a);
                        //location.href=this_url;
                    }, 100);
                });
                //
                var timeout, t = 1000, hasApp = true;
                setTimeout(function () {
                    if (hasApp) {
                        alert('安装了app');
                    } else {
                        alert('未安装app');
                    }
                    document.body.removeChild(ifr);
                }, 2000);

                var t1 = Date.now();
                var ifr = document.createElement("iframe");
                ifr.setAttribute('src', url);
                ifr.setAttribute('style', 'display:none');
                document.body.appendChild(ifr);
                timeout = setTimeout(function () {
                    var t2 = Date.now();
                    if (!t1 || t2 - t1 < t + 100) {
                        hasApp = false;
                    }
                }, t);
                //
            }
    );

</script>
</body>
</html>